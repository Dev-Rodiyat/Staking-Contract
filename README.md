# **Staking Smart Contract (TypeScript)**

A simple staking system that allows users to stake tokens, earn rewards over time and withdraw both their staked amount and accumulated rewards. This version is fully written in TypeScript and follows a clean development structure suitable for Hardhat projects.

## **Features**

* Users can stake ERC20 tokens.
* Rewards grow linearly based on the staking duration.
* Users can withdraw both staked tokens and earned rewards.
* Owner can set or update the reward rate.
* Fully typed TypeScript project.

---

## **Folder Structure**

```
project-root/
│
├── contracts/
│   ├── Staking.sol
│   └── Token.sol
│
├── ignition/
│   └── modules/
│       └── staking.ts
│
├── scripts/
│   ├── deploy.ts
│   └── interact.ts
│
├── test/
│   └── staking.test.ts
│
├── typechain-types/
│   └── ... (autogenerated)
│
├── hardhat.config.ts
├── package.json
└── README.md
```

---

## **How It Works**

### **1. Staking**

Users call:

```solidity
stake(uint256 amount)
```

The contract transfers tokens from the user to itself and records:

* amount staked
* timestamp
* pending rewards

### **2. Rewards**

Rewards accumulate based on:

```
reward = stakedAmount * rewardRate * timeElapsed
```

Rewards are stored, not automatically added to the staked amount.

### **3. Withdrawal**

When a user calls:

```solidity
withdraw()
```

They receive:

* their entire staked amount
* all accumulated rewards
  Both are transferred directly to their wallet.

### **Rewards are NOT added to the staked balance.**

They are paid out separately to the user's account.

---

## **Deployment (Ignition Module)**

The project uses a TypeScript Ignition module located at:

```
ignition/modules/staking.ts
```

Example structure:

```ts
import { buildModule } from "@nomicfoundation/hardhat-ignition/modules";

const StakingModule = buildModule("StakingModule", (m) => {
    const token = m.contract("Token");
    const staking = m.contract("Staking", [token]);

    return { token, staking };
});

export default StakingModule;
```

Deploy using:

```
npx hardhat ignition deploy ./ignition/modules/staking.ts
```

---

## **Running Tests**

Tests are located in:

```
test/staking.test.ts
```

Run:

```
npx hardhat test
```

---

## **Scripts**

### Deploy script

```
scripts/deploy.ts
```

Run:

```
npx hardhat run scripts/deploy.ts --network sepolia
```

### Interact script

```
scripts/interact.ts
```

Run:

```
npx hardhat run scripts/interact.ts
```

---

## **Technologies Used**

* Solidity (v0.8.x)
* TypeScript
* Hardhat
* TypeChain
* Ethers.js
* Ignition Modules

---

## **Requirements**

* Node 18+
* Hardhat installed globally or locally
* An `.env` file with your RPC URL and private key

Example:

```
RPC_URL=https://sepolia.infura.io/v3/xxx
PRIVATE_KEY=your_private_key
```

---

## **Installation**

```
git clone <repository>
cd project
npm install
```

Compile:

```
npx hardhat compile
```

---

## **License**

MIT License.

---

If you want, I can also prepare:

* a better README with diagrams
* API documentation for all functions
* comments inside your Solidity contract
* a full project setup in TS with working code

Just tell me.
